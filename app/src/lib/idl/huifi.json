{
    "version": "0.1.0",
    "name": "huifi",
    "instructions": [
      {
        "name": "createPool",
        "accounts": [
          { "name": "pool", "isMut": true, "isSigner": false },
          { "name": "admin", "isMut": true, "isSigner": true },
          { "name": "systemProgram", "isMut": false, "isSigner": false }
        ],
        "args": [
          { "name": "name", "type": "string" },
          { "name": "description", "type": "string" },
          { "name": "currency", "type": "string" },
          { "name": "maxParticipants", "type": "u8" },
          { "name": "contributionAmount", "type": "u64" },
          { "name": "frequency", "type": "u64" },
          { "name": "yieldBasisPoints", "type": "u16" }
        ]
      },
      {
        "name": "joinPool",
        "accounts": [
          { "name": "pool", "isMut": true, "isSigner": false },
          { "name": "user", "isMut": true, "isSigner": true },
          { "name": "userAccount", "isMut": true, "isSigner": false },
          { "name": "systemProgram", "isMut": false, "isSigner": false }
        ],
        "args": []
      },
      {
        "name": "contribute",
        "accounts": [
          { "name": "pool", "isMut": true, "isSigner": false },
          { "name": "user", "isMut": true, "isSigner": true },
          { "name": "userAccount", "isMut": true, "isSigner": false },
          { "name": "tokenProgram", "isMut": false, "isSigner": false },
          { "name": "userTokenAccount", "isMut": true, "isSigner": false },
          { "name": "poolTokenAccount", "isMut": true, "isSigner": false }
        ],
        "args": [
          { "name": "amount", "type": "u64" }
        ]
      },
      {
        "name": "placeBid",
        "accounts": [
          { "name": "bid", "isMut": true, "isSigner": false },
          { "name": "pool", "isMut": true, "isSigner": false },
          { "name": "bidder", "isMut": true, "isSigner": true },
          { "name": "bidderTokenAccount", "isMut": true, "isSigner": false },
          { "name": "poolTokenAccount", "isMut": true, "isSigner": false },
          { "name": "tokenProgram", "isMut": false, "isSigner": false },
          { "name": "systemProgram", "isMut": false, "isSigner": false }
        ],
        "args": [
          { "name": "round", "type": "u8" },
          { "name": "amount", "type": "u64" }
        ]
      },
      {
        "name": "claimJackpot",
        "accounts": [
          { "name": "pool", "isMut": true, "isSigner": false },
          { "name": "roundResult", "isMut": true, "isSigner": false },
          { "name": "winner", "isMut": true, "isSigner": true },
          { "name": "winnerTokenAccount", "isMut": true, "isSigner": false },
          { "name": "poolTokenAccount", "isMut": true, "isSigner": false },
          { "name": "userAccount", "isMut": true, "isSigner": false },
          { "name": "tokenProgram", "isMut": false, "isSigner": false }
        ],
        "args": [
          { "name": "round", "type": "u8" }
        ]
      },
      {
        "name": "createUserAccount",
        "accounts": [
          { "name": "userAccount", "isMut": true, "isSigner": false },
          { "name": "user", "isMut": true, "isSigner": true },
          { "name": "systemProgram", "isMut": false, "isSigner": false }
        ],
        "args": []
      }
    ],
    "accounts": [
      {
        "name": "HuifiPool",
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "admin", "type": "publicKey" },
            { "name": "name", "type": "string" },
            { "name": "description", "type": "string" },
            { "name": "currency", "type": "string" },
            { "name": "maxParticipants", "type": "u8" },
            { "name": "currentParticipants", "type": "u8" },
            { "name": "contributionAmount", "type": "u64" },
            { "name": "totalValue", "type": "u64" },
            { "name": "frequency", "type": "u64" },
            { "name": "status", "type": "u8" },
            { "name": "nextPayoutTimestamp", "type": "u64" },
            { "name": "currentRound", "type": "u8" },
            { "name": "yieldBasisPoints", "type": "u16" },
            { "name": "creationTimestamp", "type": "u64" }
          ]
        }
      },
      {
        "name": "UserAccount",
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "owner", "type": "publicKey" },
            { "name": "joinedPools", "type": { "vec": "publicKey" } },
            { "name": "currentContributions", "type": { "vec": "publicKey" } },
            { "name": "xp", "type": "u32" },
            { "name": "level", "type": "u8" },
            { "name": "totalContributed", "type": "u64" },
            { "name": "totalWon", "type": "u64" }
          ]
        }
      },
      {
        "name": "BidAccount",
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "bidder", "type": "publicKey" },
            { "name": "pool", "type": "publicKey" },
            { "name": "round", "type": "u8" },
            { "name": "amount", "type": "u64" },
            { "name": "timestamp", "type": "u64" }
          ]
        }
      },
      {
        "name": "RoundResult",
        "type": {
          "kind": "struct", 
          "fields": [
            { "name": "pool", "type": "publicKey" },
            { "name": "round", "type": "u8" },
            { "name": "winner", "type": "publicKey" },
            { "name": "amount", "type": "u64" },
            { "name": "timestamp", "type": "u64" }
          ]
        }
      }
    ],
    "errors": [
      {
        "code": 6000,
        "name": "PoolFull",
        "msg": "This pool is already at maximum capacity"
      },
      {
        "code": 6001,
        "name": "AlreadyJoined",
        "msg": "User has already joined this pool"
      },
      {
        "code": 6002,
        "name": "InvalidRound",
        "msg": "The specified round is invalid"
      },
      {
        "code": 6003,
        "name": "NotWinner",
        "msg": "You are not the winner of this round"
      },
      {
        "code": 6004,
        "name": "InsufficientFunds",
        "msg": "Insufficient funds for this operation"
      }
    ]
  }